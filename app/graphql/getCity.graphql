fragment CityOlympiad on Olympiad {
  id
  year
  olympiadType
}

fragment CityFields on City {
  id
  name
  slug
  firstOlympiad
  country {
    name
    flagByTimestamp(dateTimestamp: { start: { value: $now, inclusive: true }, end: { value: $now, inclusive: true } }) {
      png
    }
  }
  olympiads(orderBy: YEAR_ASC, condition: { realOlympiad: true }) {
    nodes {
      ...CityOlympiad
    }
  }
}

query GetCity($slug: String!, $now: Datetime!) {
  cityBySlug(slug: $slug) {
    ...CityFields
  }
}

query GetCities($now: Datetime!) {
  cities {
    nodes {
      ...CityFields
    }
  }
}
